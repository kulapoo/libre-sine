import{r as o,R as y,j as t}from"./index-DJiFHe4L.js";import{u as p,c as j,b,M,e as w}from"./MovieForm-DqYBQSq_.js";import"./StarIcon-CiHnNQHP.js";function N({title:s,titleId:i,...r},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},r),s?o.createElement("title",{id:i},s):null,o.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const m=o.forwardRef(N),R=()=>{const[s,i]=y.useState(),{data:r,isLoading:l,refetch:c}=p(),{favorites:d,toggleFavorite:x}=j(),{updateMovie:g,deleteMovie:v}=b(),n=o.useMemo(()=>r?.movies?r.movies.filter(e=>{const a=`${e.storage_type}-${e.id}`;return d.includes(a)}):[],[r?.movies,d]),u=e=>{const a=`${e.storage_type}-${e.id}`;x(a)},f=async e=>{if(!s?.id)return;(await g(s.id,e)).success&&(i(void 0),c())},h=async e=>{e.id&&confirm(`Are you sure you want to delete "${e.name}"?`)&&(await v(e.id)).success&&c()};return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(m,{className:"h-8 w-8 text-red-500"}),t.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"My Favorites"})]}),t.jsxs("p",{className:"text-gray-600",children:[n.length," ",n.length===1?"movie":"movies"," in your favorites"]})]}),l?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:n.map(e=>t.jsx(M,{movie:e,isFavorite:!0,onToggleFavorite:u,onEdit:e.storage_type==="indexedDB"?i:void 0,onDelete:e.storage_type==="indexedDB"?h:void 0},`${e.storage_type}-${e.id}`))}):t.jsxs("div",{className:"text-center py-16",children:[t.jsx(m,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No favorites yet"}),t.jsx("p",{className:"text-gray-500",children:"Start adding movies to your favorites by clicking the star icon on any movie card"})]}),s&&t.jsx(w,{movie:s,onSubmit:f,onCancel:()=>i(void 0)})]})};export{R as FavoritesPage};
